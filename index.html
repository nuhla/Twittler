<!DOCTYPE html>
<html>

<head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="main.css">
</head>
<div id="header">
              <div id="logo">
               <button id="refBtn"> <img src="http://pluspng.com/img-png/twitter-logo-png-twitter-logo-vector-png-clipart-library-518.png"></button>
               
            </div>
                <h1 style="color: white;"> Welcom to Our Tweeter </h1>
                <div id="right">
                  
                </div>
        
            
</div>
<body>
  <div>
     
  <div class="insertComment">
   
            <div id="addTweet">
              <div id="usersImgs">
            </div>
            <p id="UserName">Visitor</p>
            <p style="font-size:3em; color: #083d54">You Can add your tweets from her:</p>
            
              <p>insert your Tweet</p>
              <input placeholder="Insert Your tweet" id ="Ttxt" style="width: 90% ; height: 50px;">
              <button class="addTweet"> Tweet</button>
            </div>
                 
  </div>
    <div id="mainContent">

        <div id="contenet">
        </div>
    </div>
    </div>
    <script>
      

      // Array of imges Url
      var ImgsArray=["dummy-user.png","190669.PNG",
      "dummy-user.png","asl-interpreter-profiles.png",
      "esther.png",  "images.png"]
      // var User and Tweet;
      var currentUser ="visitor";
      var currentTweet=[];


        $(document).ready(function() {

          // a variable to get UserImgs Div tage
          var UsersImgTag=$('#usersImgs');
          //  a variable to define the nuber of users
          var  Usersount=window.users.length-1;

        
         

          // loop throw the numbers of users 
          while(Usersount>=0){
          //create a new button tag and append it to UserImgs tag 
           UsersImgTag.append('<button id="'+window.users[Usersount]+'"><img src="resoures\\loginImg\\'+ImgsArray[Usersount] +'"></button>');
           console.log($('#'+window.users[Usersount]));
           debugger
            // assigne a click event yo each  user button
            $('#'+window.users[Usersount]).click(function(){
              //if clicked the paragrph of user name value will chang to the user name
              $("#UserName").text(this.id);
              currentUser=this.id;
              //console.log(currentUser );
           
            });
            Usersount--;
          }

          //add tweet Click Event to the Button
        
        
            var $contenet = $('#contenet');
            //$body.html('');
            var index = streams.home.length - 1;
            while (index >= 0) {
                var tweet = streams.home[index];
                var $tweet = $('<div class="tweet"></div> ');
                $tweet.append($('<a href="#" class="tweetINFO" id="'+ tweet.user+'">'+'@'+tweet.user +'</a> ' +'<p>'+ tweet.message+',before: '+formatTime(streams.home[index].created_at)+'</p>'))

                //$tweet.text('@' + tweet.user + ': ' + tweet.message);
                $tweet.appendTo($contenet);
                index -= 1;

            }


//console.log(myclickFunction(window.event ,"visitor
  $(document).on("click", "a.tweetINFO" , function() { 

     var thisTage= $(this);
     var user1=thisTage[0]['id']; 
     var $contenet = $('#contenet');
     $contenet.html('');
     // $contenet.append()
    var index = streams.users[user1].length - 1;

     while (index >= 0) {
              
      var $tweet = $('<div class="tweet"></div> ');
       $tweet.append($('<p class="tweetINFO '+ tweet.user+'">'+'@'+user1 +'</p> ' +'<p>'+ streams.users[user1][index].message+" ,before: "+formatTime(streams.users[user1][index].created_at)+'</p>'))
      $tweet.appendTo($contenet);
      index -= 1;
               // $('.tweetINFO').addEventListener('click', myclickFunction)
     }

     $contenet.append( '<button id="refBtn">  <img src="resoures\\loginImg\\back-button.png"></button>');
  })

     /// a function to gather the tweets of the user and display it in one page  

    
     function myclickFunction (){
    debugger
            //var nuhla= $(this);
            var user1=window.currentUser
            var $contenet = $('#contenet');
            $contenet.html('');
            // $contenet.append()
           var index = streams.users[user1].length - 1;
           
            while (index >= 0) {
              console.log(tweet)
            
                var $tweet = $('<div class="tweet"></div> ');
                $tweet.append($('<p class="tweetINFO '+ tweet.user+'">'+'@'+user1 +'</p> ' +'<p>'+ streams.users[user1][index].message+" ,before: "+formatTime(streams.users[user1][index].created_at)+'</p>'))
                $tweet.appendTo($contenet);
                index -= 1;

            }} 

   $(document).on("click", "#refBtn",function(){  
        location.reload();
      })


$('.addTweet').click(function(){
            debugger
              var currentTweet =$('#Ttxt').val();
              var created_at=new Date();

             if(currentUser !=="" && $('#Ttxt').val()!==""){
              console.log(streams.users[currentUser])
              streams.users[currentUser].push({user:currentUser, message:$('#Ttxt').val(), created_at:new Date()});

                 var $tweet = $('<div class="tweet"></div> ');
                $tweet.append($('<a href="#" class="tweetINFO" id="'+ currentUser+'">'+'@'+currentUser +'</a> ' +'<p>'+ currentTweet+" ,before: "+formatTime(created_at)+'</p>'))
               $('#contenet').prepend( $tweet);
               window.streams.currentUser =currentUser;
                
              }
          });
 
    
});
 
          
//a function to formaye the time in the simplest way 
 function formatTime (obj) {

    return (obj.getMinutes()+" minutes")
   }

           function addTweet()
           {
            var NewUser = $('#Utxt').val();
            var NewTweet=$('#Ttxt').val();
            var isAvisitor=$('#isVistor').prop('checked');
            var dateCreated=Date.now();

            
           }


    </script>


</body>

</html>